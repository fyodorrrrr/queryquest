<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SQL Playground</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <header class="header">
        <div class="header__brand">
            <h1 class="header__title">QUERYQUEST</h1>
        </div>
        
        <nav class="header__nav">
            <a href="#" class="nav-item nav-item--active" data-page="play">
                <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polygon points="5 3 19 12 5 21 5 3"></polygon>
                </svg>
                <span class="nav-label">Play</span>
            </a>
            <a href="#" class="nav-item" data-page="about">
                <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="10"></circle>
                    <line x1="12" y1="16" x2="12" y2="12"></line>
                    <line x1="12" y1="8" x2="12.01" y2="8"></line>
                </svg>
                <span class="nav-label">About</span>
            </a>
        </nav>
        
        <div class="header__spacer"></div>
    </header>

    <div class="container">
        <!-- LEFT: Block Menu -->
        <aside class="block-menu">
            <div class="block-menu__header">
                <h2>Puzzle Blocks üß© <button class="help-icon" data-help="blocks" title="What are these?">?</button></h2>
                <p style="font-size: 0.7rem; color: var(--text-secondary); margin-top: 0.25rem;">Drag available blocks to build</p>
            </div>
            
            <div class="block-category">
                <h3 class="block-category__title">Commands</h3>
                <div class="block-list">
                    <div class="block block--command" draggable="true" data-type="SELECT">SELECT</div>
                    <div class="block block--command" draggable="true" data-type="FROM">FROM</div>
                    <div class="block block--command" draggable="true" data-type="WHERE">WHERE</div>
                    <div class="block block--command" draggable="true" data-type="JOIN">JOIN</div>
                    <div class="block block--command" draggable="true" data-type="ON">ON</div>
                    <div class="block block--command" draggable="true" data-type="GROUP BY">GROUP BY</div>
                    <div class="block block--command" draggable="true" data-type="ORDER BY">ORDER BY</div>
                    <div class="block block--command" draggable="true" data-type="LIMIT">LIMIT</div>
                </div>
            </div>
            
            <div class="block-category">
                <h3 class="block-category__title">Comparisons</h3>
                <div class="block-list">
                    <div class="block block--operator" draggable="true" data-type="=">=</div>
                    <div class="block block--operator" draggable="true" data-type="!=">!=</div>
                    <div class="block block--operator" draggable="true" data-type=">">&gt;</div>
                    <div class="block block--operator" draggable="true" data-type="<">&lt;</div>
                    <div class="block block--operator" draggable="true" data-type=">=">>=</div>
                    <div class="block block--operator" draggable="true" data-type="<="><=</div>
                    <div class="block block--operator" draggable="true" data-type="LIKE">LIKE</div>
                    <div class="block block--operator" draggable="true" data-type="IN">IN</div>
                </div>
            </div>
            
            <div class="block-category">
                <h3 class="block-category__title">Logic</h3>
                <div class="block-list">
                    <div class="block block--operator" draggable="true" data-type="AND">AND</div>
                    <div class="block block--operator" draggable="true" data-type="OR">OR</div>
                </div>
            </div>
            
            <div class="block-category">
                <h3 class="block-category__title">Functions</h3>
                <div class="block-list">
                    <div class="block block--function" draggable="true" data-type="COUNT()">COUNT()</div>
                    <div class="block block--function" draggable="true" data-type="SUM()">SUM()</div>
                    <div class="block block--function" draggable="true" data-type="AVG()">AVG()</div>
                    <div class="block block--function" draggable="true" data-type="MIN()">MIN()</div>
                    <div class="block block--function" draggable="true" data-type="MAX()">MAX()</div>
                    <div class="block block--function" draggable="true" data-type="DISTINCT">DISTINCT</div>
                </div>
            </div>
            
            <div class="block-category">
                <h3 class="block-category__title">Tables</h3>
                <div class="block-list">
                    <div class="block block--table" draggable="true" data-type="employees">employees</div>
                    <div class="block block--table" draggable="true" data-type="departments">departments</div>
                </div>
            </div>
            
            <div class="block-category">
                <h3 class="block-category__title">Columns</h3>
                <div class="block-list">
                    <div class="block block--column" draggable="true" data-type="*">*</div>
                    <div class="block block--column" draggable="true" data-type="id">id</div>
                    <div class="block block--column" draggable="true" data-type="name">name</div>
                    <div class="block block--column" draggable="true" data-type="department">department</div>
                    <div class="block block--column" draggable="true" data-type="salary">salary</div>
                    <div class="block block--column" draggable="true" data-type="hire_date">hire_date</div>
                    <div class="block block--column" draggable="true" data-type="location">location</div>
                </div>
            </div>
            
            <div class="block-category">
                <h3 class="block-category__title">Values & Sorting</h3>
                <div class="block-list">
                    <div class="block block--value" draggable="true" data-type="ASC">ASC</div>
                    <div class="block block--value" draggable="true" data-type="DESC">DESC</div>
                    <div class="block block--value block--value-input" draggable="true" data-type="number">
                        <span>üî¢</span>
                        <input type="number" class="block-input" placeholder="123" onclick="event.stopPropagation()">
                    </div>
                    <div class="block block--value block--value-input" draggable="true" data-type="text">
                        <span>üìù</span>
                        <input type="text" class="block-input" placeholder="text" onclick="event.stopPropagation()">
                    </div>
                </div>
            </div>
        </aside>

        <!-- CENTER: Query Builder -->
        <section class="builder-panel">
            <div class="builder-header">
                <h2>üî® Query Builder</h2>
                <button class="btn btn-clear-builder" id="clear-builder-btn">üóëÔ∏è Clear All</button>
            </div>
            
            <div id="query-canvas" class="query-canvas">
                <div class="canvas-placeholder">
                    <span>Drag blocks here to build your query üß©</span>
                    <br>
                    <small style="color: var(--text-secondary);">Start with SELECT</small>
                </div>
            </div>
            
            <div class="generated-sql">
                <div class="generated-sql__header">
                    <h3>Generated SQL</h3>
                </div>
                <pre id="generated-sql-output" class="sql-output">-- Your query will appear here</pre>
            </div>
            
            <div class="controls">
                <button class="btn btn-run btn--disabled" id="run-builder-btn" disabled>Run Query</button>
            </div>
        </section>

        <!-- RIGHT: Results & Schema -->
        <main class="results-panel">
            <nav class="tabs">
                <button class="tab tab-active" data-tab="results">üìä Results</button>
                <button class="tab" data-tab="schema">üóÉÔ∏è Schema</button>
            </nav>
            
            <!-- Results Tab -->
            <div id="results-tab" class="tab-content tab-content-active">
                <div id="message"></div>
                
                <!-- Results Info Bar (hidden until query runs) -->
                <div id="results-info" class="results-info" style="display: none;"></div>
                
                <!-- Table Container (populated by JS) -->
                <div id="results" class="results-container">
                </div>
                
                <!-- Help Modal (hidden by default) -->
                <div id="examples-modal" class="examples-modal" style="display: none;">
                    <div class="examples-modal__content">
                        <div class="examples-modal__header">
                            <h3>üéØ Getting Started</h3>
                            <button class="examples-modal__close" id="close-examples-btn">&times;</button>
                        </div>
                        <div class="examples-modal__body">
                            <!-- Step Indicators -->
                            <div class="steps-indicator">
                                <span class="step-dot active" data-step="1">1</span>
                                <span class="step-line"></span>
                                <span class="step-dot" data-step="2">2</span>
                                <span class="step-line"></span>
                                <span class="step-dot" data-step="3">3</span>
                            </div>

                            <!-- Step 1 -->
                            <div class="modal-step active" data-step="1">
                                <div class="step-icon">üß©</div>
                                <h4>Drag Blocks to Build</h4>
                                <p>Pick blocks from the left panel and drag them to the canvas in the middle.</p>
                                <div class="step-tip">
                                    <span class="tip-label">üí° Start with:</span>
                                    <code class="tip-code">SELECT</code>
                                </div>
                            </div>

                            <!-- Step 2 -->
                            <div class="modal-step" data-step="2">
                                <div class="step-icon">üîó</div>
                                <h4>Connect Your Query</h4>
                                <p>Blocks snap together like puzzle pieces. Follow the highlighted blocks to build a valid query.</p>
                                <div class="step-example">
                                    <span class="example-block command">SELECT</span>
                                    <span class="example-arrow">‚Üí</span>
                                    <span class="example-block column">*</span>
                                    <span class="example-arrow">‚Üí</span>
                                    <span class="example-block command">FROM</span>
                                    <span class="example-arrow">‚Üí</span>
                                    <span class="example-block table">employees</span>
                                </div>
                            </div>

                            <!-- Step 3 -->
                            <div class="modal-step" data-step="3">
                                <div class="step-icon">‚ñ∂Ô∏è</div>
                                <h4>Run & See Results</h4>
                                <p>Click the green "Run Query" button to see your data appear below!</p>
                                <div class="step-tip success">
                                    <span class="tip-label">‚úÖ That's it!</span>
                                    <span>You just learned the basics of SQL.</span>
                                </div>
                            </div>

                            <!-- Navigation Buttons -->
                            <div class="modal-nav">
                                <button class="modal-btn modal-btn--secondary" id="modal-prev" style="visibility: hidden;">‚Üê Back</button>
                                <button class="modal-btn modal-btn--primary" id="modal-next">Next ‚Üí</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Schema Tab -->
            <div id="schema-tab" class="tab-content">
                <div id="schema-container">
                    <p class="loading-text">Loading schema...</p>
                </div>
            </div>
        </main>
    </div>
    <script type="module" src="block-builder/index.js"></script>
</body>
</html>