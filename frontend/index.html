<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SQL Playground</title>
    <link rel="stylesheet" href="styles.css">
    
    <!-- Fonts: Inter + JetBrains Mono -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
</head>
<body>
    <header class="header">
        <div class="header__brand">
            <h1 class="header__title">QUERYQUEST</h1>
        </div>
        
        <nav class="header__nav">
            <a href="index.html" class="nav-item nav-item--active" data-page="play">
                <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polygon points="5 3 19 12 5 21 5 3"></polygon>
                </svg>
                <span class="nav-label">Play</span>
            </a>
            <a href="about.html" class="nav-item" data-page="about">
                <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="10"></circle>
                    <line x1="12" y1="16" x2="12" y2="12"></line>
                    <line x1="12" y1="8" x2="12.01" y2="8"></line>
                </svg>
                <span class="nav-label">About</span>
            </a>
        </nav>
        
        <div class="header__spacer"></div>
    </header>

    <div class="container">
        <!-- LEFT: Block Menu -->
        <aside class="block-menu">
            <div class="block-menu__header">
                <h2>Puzzle Blocks <button class="help-icon" data-help="blocks" title="What are these?">?</button></h2>
                <p style="font-size: 0.7rem; color: var(--text-secondary); margin-top: 0.25rem;">Drag available blocks to build</p>
            </div>
            
            <div class="block-category">
                <h3 class="block-category__title">Commands</h3>
                <div class="block-list">
                    <div class="block block--command" draggable="true" data-type="SELECT">SELECT</div>
                    <div class="block block--command" draggable="true" data-type="FROM">FROM</div>
                    <div class="block block--command" draggable="true" data-type="WHERE">WHERE</div>
                    <div class="block block--command" draggable="true" data-type="JOIN">JOIN</div>
                    <div class="block block--command" draggable="true" data-type="ON">ON</div>
                    <div class="block block--command" draggable="true" data-type="GROUP BY">GROUP BY</div>
                    <div class="block block--command" draggable="true" data-type="ORDER BY">ORDER BY</div>
                    <div class="block block--command" draggable="true" data-type="LIMIT">LIMIT</div>
                </div>
            </div>
            
            <div class="block-category">
                <h3 class="block-category__title">Comparisons</h3>
                <div class="block-list">
                    <div class="block block--operator" draggable="true" data-type="=">=</div>
                    <div class="block block--operator" draggable="true" data-type="!=">!=</div>
                    <div class="block block--operator" draggable="true" data-type=">">&gt;</div>
                    <div class="block block--operator" draggable="true" data-type="<">&lt;</div>
                    <div class="block block--operator" draggable="true" data-type=">=">>=</div>
                    <div class="block block--operator" draggable="true" data-type="<="><=</div>
                    <div class="block block--operator" draggable="true" data-type="LIKE">LIKE</div>
                    <div class="block block--operator" draggable="true" data-type="IN">IN</div>
                </div>
            </div>
            
            <div class="block-category">
                <h3 class="block-category__title">Logic</h3>
                <div class="block-list">
                    <div class="block block--operator" draggable="true" data-type="AND">AND</div>
                    <div class="block block--operator" draggable="true" data-type="OR">OR</div>
                </div>
            </div>
            
            <div class="block-category">
                <h3 class="block-category__title">Functions</h3>
                <div class="block-list">
                    <div class="block block--function" draggable="true" data-type="COUNT()">COUNT()</div>
                    <div class="block block--function" draggable="true" data-type="SUM()">SUM()</div>
                    <div class="block block--function" draggable="true" data-type="AVG()">AVG()</div>
                    <div class="block block--function" draggable="true" data-type="MIN()">MIN()</div>
                    <div class="block block--function" draggable="true" data-type="MAX()">MAX()</div>
                    <div class="block block--function" draggable="true" data-type="DISTINCT">DISTINCT</div>
                </div>
            </div>
            
            <div class="block-category">
                <h3 class="block-category__title">Tables</h3>
                <div class="block-list">
                    <div class="block block--table" draggable="true" data-type="employees">employees</div>
                    <div class="block block--table" draggable="true" data-type="departments">departments</div>
                </div>
            </div>
            
            <div class="block-category">
                <h3 class="block-category__title">Columns</h3>
                <div class="block-list">
                    <div class="block block--column" draggable="true" data-type="*">*</div>
                    <div class="block block--column" draggable="true" data-type="id">id</div>
                    <div class="block block--column" draggable="true" data-type="name">name</div>
                    <div class="block block--column" draggable="true" data-type="department">department</div>
                    <div class="block block--column" draggable="true" data-type="salary">salary</div>
                    <div class="block block--column" draggable="true" data-type="hire_date">hire_date</div>
                    <div class="block block--column" draggable="true" data-type="location">location</div>
                </div>
            </div>
            
            <div class="block-category">
                <h3 class="block-category__title">Values & Sorting</h3>
                <div class="block-list">
                    <div class="block block--value" draggable="true" data-type="ASC">ASC</div>
                    <div class="block block--value" draggable="true" data-type="DESC">DESC</div>
                    <div class="block block--value block--value-input" draggable="true" data-type="number">
                        <span>#</span>
                        <input type="number" class="block-input" placeholder="123" onclick="event.stopPropagation()">
                    </div>
                    <div class="block block--value block--value-input" draggable="true" data-type="text">
                        <span>Aa</span>
                        <input type="text" class="block-input" placeholder="text" onclick="event.stopPropagation()">
                    </div>
                </div>
            </div>
        </aside>

        <!-- CENTER: Query Builder -->
        <section class="builder-panel">
            <div class="builder-header">
                <h2>Query Builder</h2>
                <button class="btn btn-clear-builder" id="clear-builder-btn">Clear All</button>
            </div>
            
            <div id="query-canvas" class="query-canvas">
                <div class="canvas-placeholder">
                    <span>Drag blocks here to build your query</span>
                    <br>
                    <small style="color: var(--text-secondary);">Start with SELECT</small>
                </div>
            </div>
            
            <div class="generated-sql">
                <div class="generated-sql__header">
                    <h3>Generated SQL</h3>
                </div>
                <pre id="generated-sql-output" class="sql-output">-- Your query will appear here</pre>
            </div>
            
            <div class="controls">
                <button class="btn btn-run btn--disabled" id="run-builder-btn" disabled>Run Query</button>
            </div>
        </section>

        <!-- RIGHT: Results & Schema -->
        <main class="results-panel">
            <nav class="tabs">
                <button class="tab tab-active" data-tab="results">Results</button>
                <!-- <button class="tab" data-tab="schema">Schema</button> -->
            </nav>
            
            <!-- Results Tab -->
            <div id="results-tab" class="tab-content tab-content-active">
                <div id="message"></div>
                
                <!-- Results Info Bar (hidden until query runs) -->
                <div id="results-info" class="results-info" style="display: none;"></div>
                
                <!-- Table Container (populated by JS) -->
                <div id="results" class="results-container">
                </div>
                
                <!-- Help Modal (hidden by default) -->
                <div id="examples-modal" class="examples-modal" style="display: none;">
                    <div class="examples-modal__content">
                        <div class="examples-modal__header">
                            <h3>Getting Started</h3>
                            <button class="examples-modal__close" id="close-examples-btn">&times;</button>
                        </div>
                        <div class="examples-modal__body">
                            <!-- Step Indicators -->
                            <div class="steps-indicator">
                                <span class="step-dot active" data-step="1">1</span>
                                <span class="step-line"></span>
                                <span class="step-dot" data-step="2">2</span>
                                <span class="step-line"></span>
                                <span class="step-dot" data-step="3">3</span>
                            </div>

                            <!-- Step 1 -->
                            <div class="modal-step active" data-step="1">
                                <div class="step-icon">1</div>
                                <h4>Drag Blocks to Build</h4>
                                <p>Pick blocks from the left panel and drag them to the canvas in the middle.</p>
                                <div class="step-tip">
                                    <span class="tip-label">Tip: Start with</span>
                                    <span class="tip-code">SELECT</span>
                                </div>
                            </div>

                            <!-- Step 2 -->
                            <div class="modal-step" data-step="2">
                                <div class="step-icon">2</div>
                                <h4>Connect Your Query</h4>
                                <p>Blocks snap together like puzzle pieces. Follow the highlighted blocks to build a valid query.</p>
                                <div class="step-example">
                                    <span class="example-block command">SELECT</span>
                                    <span class="example-arrow">→</span>
                                    <span class="example-block column">*</span>
                                    <span class="example-arrow">→</span>
                                    <span class="example-block command">FROM</span>
                                    <span class="example-arrow">→</span>
                                    <span class="example-block table">employees</span>
                                </div>
                            </div>

                            <!-- Step 3 -->
                            <div class="modal-step" data-step="3">
                                <div class="step-icon">3</div>
                                <h4>Run & See Results</h4>
                                <p>Click the green "Run Query" button to see your data appear below!</p>
                                <div class="step-tip success">
                                    <span class="tip-label">That's it!</span>
                                    <span>You just learned SQL basics.</span>
                                </div>
                            </div>

                            <!-- Navigation Buttons -->
                            <div class="modal-nav">
                                <button class="modal-btn modal-btn--secondary" id="modal-prev" style="visibility: hidden;">Back</button>
                                <button class="modal-btn modal-btn--primary" id="modal-next">Next</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Schema Tab -->
            <div id="schema-tab" class="tab-content">
                <div id="schema-container">
                    <p class="loading-text">Loading schema...</p>
                </div>
            </div>
        </main>
    </div>
    <!-- HELP MODALS (place before closing </body> tag) -->
    
    <!-- Puzzle Blocks Help Modal -->
    <div id="blocks-help-modal" class="help-modal" style="display: none;">
        <div class="help-modal__content">
            <div class="help-modal__header help-modal__header--purple">
                <span class="help-modal__icon">?</span>
                <h3>What are Puzzle Blocks?</h3>
                <button class="help-modal__close" data-close="blocks-help-modal">&times;</button>
            </div>
            <div class="help-modal__body">
                <p class="help-modal__intro">
                    Blocks are <strong>visual pieces</strong> that represent parts of a SQL query. Instead of typing code, you drag and connect them!
                </p>
                
                <div class="help-blocks-list">
                    <div class="help-block-item">
                        <span class="help-block-preview command">SELECT</span>
                        <div class="help-block-desc">
                            <strong>Commands</strong>
                            <span>Actions like SELECT, FROM, WHERE — the verbs of SQL</span>
                        </div>
                    </div>
                    <div class="help-block-item">
                        <span class="help-block-preview table">employees</span>
                        <div class="help-block-desc">
                            <strong>Tables</strong>
                            <span>Where your data lives — like spreadsheets</span>
                        </div>
                    </div>
                    <div class="help-block-item">
                        <span class="help-block-preview column">name</span>
                        <div class="help-block-desc">
                            <strong>Columns</strong>
                            <span>Specific fields — like spreadsheet columns</span>
                        </div>
                    </div>
                    <div class="help-block-item">
                        <span class="help-block-preview function">COUNT()</span>
                        <div class="help-block-desc">
                            <strong>Functions</strong>
                            <span>Math helpers — count, sum, average</span>
                        </div>
                    </div>
                    <div class="help-block-item">
                        <span class="help-block-preview operator">=</span>
                        <div class="help-block-desc">
                            <strong>Operators</strong>
                            <span>Compare values — equals, greater than</span>
                        </div>
                    </div>
                </div>
                
                <div class="help-tip-box">
                    <span class="help-tip-icon">i</span>
                    <span><strong>Tip:</strong> Hover over any block to see what it does!</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Source Data Help Modal -->
    <div id="source-help-modal" class="help-modal" style="display: none;">
        <div class="help-modal__content">
            <div class="help-modal__header help-modal__header--blue">
                <span class="help-modal__icon">?</span>
                <h3>What is Source Data?</h3>
                <button class="help-modal__close" data-close="source-help-modal">&times;</button>
            </div>
            <div class="help-modal__body">
                <p class="help-modal__intro">
                    Source data is the <strong>information you're searching through</strong>. Think of it like a filing cabinet with organized folders.
                </p>
                
                <div class="help-table-explain">
                    <div class="help-table-card">
                        <div class="help-table-icon">E</div>
                        <div class="help-table-info">
                            <strong>employees</strong>
                            <span>A list of people who work at a company — their names, salaries, departments, and when they were hired.</span>
                        </div>
                    </div>
                    <div class="help-table-card">
                        <div class="help-table-icon">D</div>
                        <div class="help-table-info">
                            <strong>departments</strong>
                            <span>A list of company departments — like Engineering, Sales, or Marketing — and where they're located.</span>
                        </div>
                    </div>
                </div>
                
                <div class="help-analogy">
                    <div class="help-analogy__header">Think of it like...</div>
                    <div class="help-analogy__content">
                        <p><strong>Tables</strong> = Spreadsheets</p>
                        <p><strong>Columns</strong> = Headers (Name, Salary)</p>
                        <p><strong>Rows</strong> = Individual records (each employee)</p>
                    </div>
                </div>

                <div class="help-tip-box">
                    <span class="help-tip-icon">!</span>
                    <span><strong>Your goal:</strong> Use SQL to ask questions about this data!</span>
                </div>
            </div>
        </div>
    </div>

    <script type="module" src="block-builder/index.js"></script>
</body>
</html>